

This explains **how to create a custom Amazon Machine Image (AMI)** from an existing EC2 instance and use it to launch new instances.

---

## ğŸ§  What is an AMI?

An **Amazon Machine Image (AMI)** is a **template** that contains:

* Operating System
* Installed software
* Application code
* Configuration files
* Root EBS snapshot

ğŸ‘‰ AMIs help in **scaling, automation, backup, and disaster recovery**.

---

## ğŸ§© Architecture Overview

```
+------------------+
|   EC2 Instance   |
|  (Configured)    |
+------------------+
        |
        | Create Image
        v
+------------------+
|      AMI         |
+------------------+
        |
        | Launch
        v
+------------------+
|   New EC2        |
| (Same Setup)     |
+------------------+
```

---

## âœ… Prerequisites

* AWS account
* Running EC2 instance
* EC2 instance in **running or stopped** state
* Required IAM permissions

---

## ğŸ› ï¸ Step 1: Prepare the EC2 Instance

(Optional but recommended)

* Install required software
* Deploy application code
* Update OS packages
* Stop unnecessary services

Example:

```bash
sudo yum update -y
sudo systemctl stop httpd
```

---

## ğŸ–±ï¸ Step 2: Create AMI from EC2 (AWS Console)

1. Go to **AWS Console**
2. Navigate to **EC2 â†’ Instances**
3. Select your **EC2 instance**
4. Click **Actions â†’ Image and templates â†’ Create image**

---

## âœï¸ Step 3: Configure AMI Details

Fill in the following:

* **Image name**: `my-custom-ami-v1`
* **Image description**: Optional
* **Reboot**:

  * âœ” Checked â†’ Safer (recommended)
  * âŒ Unchecked â†’ No downtime (risk of data inconsistency)

Click **Create image**

ğŸ“Œ AWS now:

* Takes EBS snapshots
* Creates the AMI in the background

---

## â³ Step 4: Monitor AMI Creation

1. Go to **EC2 â†’ AMIs**
2. Check **Status**:

   * `pending` â†’ `available`

```
EC2 â†’ AMIs â†’ Status: available âœ…
```

---

## ğŸ“¦ Step 5: Verify AMI Components

Each AMI includes:

* Root volume snapshot
* Additional EBS snapshots (if any)

```
AMI
 â”œâ”€â”€ Root EBS Snapshot
 â””â”€â”€ Data Volume Snapshot (optional)
```

---

## ğŸš€ Step 6: Launch EC2 from AMI

1. Select the AMI
2. Click **Launch instance from AMI**
3. Configure:

   * Instance type
   * Key pair
   * Security group
   * Subnet
4. Click **Launch**

ğŸ‰ New EC2 instance is created with **same configuration** as original.

---

## ğŸ” Step 7: Test the New EC2 Instance

* SSH into instance
* Verify installed software
* Check application status

```bash
systemctl status httpd
```

---

## ğŸŒ Important AMI Concepts (Exam & Interview â­)

### ğŸ“Œ AMI Scope

```
AMI â†’ Region specific
```

âœ” Can be copied to other regions
âŒ Cannot be used cross-region directly

---

### ğŸ“Œ AMI Types

| Type            | Description      |
| --------------- | ---------------- |
| Amazon AMI      | AWS-provided     |
| Marketplace AMI | Paid/third-party |
| Custom AMI      | User-created     |

---

## ğŸ”„ AMI vs Snapshot vs EC2

| Feature          | AMI | Snapshot | EC2 |
| ---------------- | --- | -------- | --- |
| Launch EC2       | âœ…   | âŒ        | âŒ   |
| Backup           | âœ…   | âœ…        | âŒ   |
| Running resource | âŒ   | âŒ        | âœ…   |

---

## ğŸ§ª Common Mistakes & Fixes

| Issue                | Reason          | Fix            |
| -------------------- | --------------- | -------------- |
| AMI stuck in pending | Large snapshot  | Wait           |
| App not working      | Service stopped | Enable service |
| Permission issue     | Wrong IAM role  | Update role    |

---

## ğŸ¯ Real-World Use Cases

* Auto Scaling Groups
* Blue-Green deployments
* Disaster recovery
* Golden image strategy
* CI/CD pipelines

---

## ğŸ“Œ GitHub Tags (SEO Friendly)

```
#aws #ec2 #ami #cloudcomputing #devops #100daysofaws
```

---

## âœ… Summary

* AMI = **EC2 blueprint**
* Created from EC2
* Backed by EBS snapshots
* Used for scaling & automation
* Region-specific


